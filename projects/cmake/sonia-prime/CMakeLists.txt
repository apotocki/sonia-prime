include (${COMMON_INCLUDE})

include_directories(${BUNDLES})
include_directories(${BUNDLES}sonia-prime)

set (BUNDLE_NAME sonia-prime)
set (BUNDLE_HOME ${BUNDLES}sonia-prime)
set (BUNDLE_SOURCES
    ${BUNDLE_HOME}/sonia/services/services.cpp
)

add_library(${BUNDLE_HOME} ${LIBRARY_TYPE} ${BUNDLE_SOURCES})

#add_definitions(-DMARGOT_CORE_EXPORTS -DMARGOT_ON_CLOSE_EXPORTS -DMARGOT_TYPE_IDENTIFIER_EXPORTS -DMARGOT_STRORABLE_EXPORTS -DMARGOT_COMMAND_EXPORTS -DMARGOT_METHODS_EXPORTS -DMARGOT_SINGLETON_EXPORTS -DMARGOT_THREAD_API_EXPORTS)
if ("${LIBRARY_TYPE}" STREQUAL "STATIC")
	add_definitions(-DSONIA_PRIME_STATIC)
    set_property(GLOBAL PROPERTY ${BUNDLE_NAME}-import-flags -DSONIA_PRIME_STATIC
	#set_property(GLOBAL PROPERTY margot-core-import-flags -DMARGOT_CORE_STATIC -DMARGOT_ON_CLOSE_STATIC -DMARGOT_TYPE_IDENTIFIER_STATIC -DMARGOT_STRORABLE_STATIC -DDMARGOT_COMMAND_STATIC -DMARGOT_METHODS_STATIC -DMARGOT_SINGLETON_STATIC -DMARGOT_THREAD_API_STATIC)
endif ()

target_link_libraries(${BUNDLE_HOME} sonia-prime-lib
# ${PLATFORM_LIBS} ${BOOST_LOG_SETUP} ${BOOST_LOG} ${BOOST_THREAD} ${BOOST_SYSTEM} ${BOOST_SERIALIZATION} ${BOOST_PROGRAM_OPTIONS} ${BOOST_FILESYSTEM} ${BOOST_LOCALE} ${OPENSSL} ${DL_LIB})
set_target_properties(${BUNDLE_HOME} PROPERTIES FOLDER "libs")
